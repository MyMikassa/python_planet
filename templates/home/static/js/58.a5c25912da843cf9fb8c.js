webpackJsonp([58],{QkGD:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("6u2u"),e=s("CaOM"),n=s("mtWM"),o=s.n(n),c=s("P9l9"),l=s("POuD"),r={data:function(){return{name:"",nav_list:[{itdesc:"我是描述",itid:"",itname:"全部",itrecommend:!0,itsort:null,ittype:10,psid:""},{itdesc:"我是描述",itid:"mynews",itname:"我发起的",itrecommend:!0,itsort:null,ittype:10,psid:""}],news_list:null,page_info:{page_num:1,page_size:10},select_nav:null,isScroll:!0,total_count:0,bottom_show:!1}},components:{navList:a.a,bottomLine:l.a},mounted:function(){e.a.changeTitle("圈子"),this.getNav(),this.getNews()},methods:{changeRoute:function(t,i,s){if("/circle/detail"==t)return this.$router.push({path:t,query:{neid:i.neid}}),!1;"shtype"==i?this.$router.push({path:t,query:{shtype:s}}):this.$router.push({path:t})},navClick:function(t){for(var i=[].concat(this.nav_list),s=0;s<i.length;s++)i[s].active=!1;i[t].active=!0,this.nav_list=[].concat(i),this.select_nav=i[t],this.getNews(this.nav_list[t].itid)},getNav:function(){var t=this;o.a.get(c.a.items_list,{params:{ittype:10}}).then(function(i){if(200==i.data.status){if(0==i.data.data.length)t.nav_list=t.nav_list.concat([]);else{for(var s=t.nav_list.concat(i.data.data),a=0;a<s.length;a++)s[a].active=!1;s[0].active=!0,t.nav_list=[].concat(s)}t.select_nav=t.nav_list[0]}})},getNews:function(t){var i=this;o.a.get(c.a.get_all_news,{params:{token:localStorage.getItem("token"),page_num:this.page_info.page_num,page_size:this.page_info.page_size,itid:t,nestatus:"",kw:this.$route.query.kw}}).then(function(t){200==t.data.status&&(i.isScroll=!0,t.data.data.length>0?(i.page_info.page_num>1?i.news_list=i.news_list.concat(t.data.data):i.news_list=t.data.data,i.page_info.page_num=i.page_info.page_num+1,i.total_count=t.data.total_count):(i.news_list=null,i.page_info.page_num=1,i.total_count=0))})},likeClick:function(t){var i=this;o.a.post(c.a.favorite_news+"?token="+localStorage.getItem("token"),{neid:this.news_list[t].neid,tftype:1}).then(function(s){if(200==s.data.status){var a=[].concat(i.news_list);a[t].is_favorite?a[t].favoritnumber=a[t].favoritnumber-1:a[t].favoritnumber=a[t].favoritnumber+1,a[t].is_favorite=!a[t].is_favorite,i.news_list=[].concat(a)}})},touchMove:function(t){var i=e.a.getScrollTop(),s=e.a.getScrollHeight();if(i+e.a.getClientHeight()>=s-10&&this.isScroll)if(this.isScroll=!1,this.news_list.length==this.total_count)this.bottom_show=!0;else for(var a=0;a<this.nav_list.length;a++)this.nav_list[a].active&&this.getNews(this.nav_list[a].neid)}},created:function(){}},v={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"m-circle",on:{touchmove:function(i){return i.stopPropagation(),t.touchMove(i)}}},[s("div",{staticClass:"m-selected-search"},[s("div",{staticClass:"m-search-input-box",on:{click:function(i){t.changeRoute("/search","shtype","news")}}},[s("span",{staticClass:"m-icon-search"}),t._v(" "),s("span",[t._v("搜索圈子关键词")])]),t._v(" "),s("span",{staticClass:"m-icon-upload",on:{click:function(i){t.changeRoute("/circle/editCircle")}}})]),t._v(" "),s("div",{staticClass:"m-circle-content"},[s("nav-list",{attrs:{navlist:t.nav_list,isScroll:!0,"is-get":!0},on:{navClick:t.navClick}}),t._v(" "),s("div",{staticClass:"m-circle-body"},[t._l(t.news_list,function(i,a){return[s("div",{staticClass:"m-video-one",on:{click:function(s){t.changeRoute("/circle/detail",i)}}},["mynews"==t.select_nav.itid?["refuse"==i.nestatus?s("span",{staticClass:"m-mark-label active"},[t._v("未通过")]):"usual"==i.nestatus?s("span",{staticClass:"m-mark-label"},[t._v("审核通过")]):s("span",{staticClass:"m-mark-label"},[t._v("审核中")])]:t._e(),t._v(" "),s("h3",[t._v(t._s(i.netitle))]),t._v(" "),"video"==i.showtype?s("div",{staticClass:"m-video-box"},[s("video",{staticClass:"m-video",attrs:{src:i.video}}),t._v(" "),s("img",{staticClass:"m-video-img",attrs:{src:i.videothumbnail,alt:""}}),t._v(" "),s("span",{staticClass:"m-video-time"},[t._v(t._s(i.videoduration))]),t._v(" "),s("span",{staticClass:"m-icon-video"})]):"picture"==i.showtype?s("img",{staticClass:"m-img",attrs:{src:i.mainpic}}):s("p",{staticClass:"m-text"},[t._v("\n            "+t._s(i.netext)+"\n          ")]),t._v(" "),s("ul",{staticClass:"m-video-icon-ul"},[s("li",{on:{click:function(i){i.stopPropagation(),t.likeClick(a)}}},[s("span",{staticClass:"m-icon-like ",class:i.is_favorite?"active":""}),t._v(" "),s("span",[t._v(t._s(i.favoritnumber))])]),t._v(" "),s("li",{staticClass:"m-border"},[s("span",{staticClass:"m-icon-comment"}),t._v(" "),s("span",[t._v(t._s(i.commentnumber))])]),t._v(" "),t._m(0,!0)]),t._v(" "),"mynews"==t.select_nav.itid&&"refuse"==i.nestatus?s("div",{staticClass:"m-refuse-reason"},[t._v("\n            "+t._s(i.refuse_info)+"\n          ")]):t._e()],2)]}),t._v(" "),t.bottom_show?s("bottom-line"):t._e()],2)],1)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("li",[i("span",{staticClass:"m-icon-transmit"})])}]};var _=s("VU/8")(r,v,!1,function(t){s("iL4Q")},"data-v-0855b6dd",null);i.default=_.exports},iL4Q:function(t,i){}});
//# sourceMappingURL=58.a5c25912da843cf9fb8c.js.map