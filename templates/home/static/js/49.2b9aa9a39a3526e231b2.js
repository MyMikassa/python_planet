webpackJsonp([49],{haC5:function(t,a){},oF7M:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e,o=s("gTcU"),c=s("6u2u"),i=s("CaOM"),n=s("mtWM"),l=s.n(n),r=s("P9l9"),u=s("Au9i"),d=s("POuD"),_={afterOpen:function(){e=document.scrollingElement.scrollTop||document.body.scrollTop,document.body.classList.add("scroll"),document.body.style.top=-e+"px"},beforeClose:function(){document.body.classList.remove("scroll"),document.scrollingElement.scrollTop=e,document.body.scrollTop=e}},m={data:function(){return{nav_list:[{name:"销量",params:"sale_value",active:!0,icon:!0,desc_asc:!0},{name:"新品",params:"time",active:!1,desc_asc:!0},{name:"价格",params:"price",active:!1,icon:!0,desc_asc:!0},{name:"筛选",params:"",active:!1,desc_asc:!0}],show_modal:!1,product_list:[],page_info:{page_num:1,page_size:10},isScroll:!0,total_count:0,bottom_show:!1,category_list:null}},components:{product:o.a,navList:c.a,bottomLine:d.a},mounted:function(){i.a.changeTitle("商品列表"),this.getProduct(1,"sale_value|asc")},methods:{touchMove:function(t){var a=i.a.getScrollTop(),s=i.a.getScrollHeight();if(a+i.a.getClientHeight()>=s-10&&this.isScroll)if(this.isScroll=!1,this.product_list.length==this.total_count)this.bottom_show=!0;else for(var e=0;e<this.nav_list.length;e++)this.nav_list[e].active&&this.getProduct(this.page_info.page_num,this.nav_list[e].params+(this.nav_list[e].desc_asc?"|asc":"|desc"))},changeRoute:function(){this.$router.push(1,"/equipment/detail")},navClick:function(t){for(var a=[].concat(this.nav_list),s=0;s<a.length;s++)a[s].active=!1;a[t].active=!0,a[t].desc_asc=!a[t].desc_asc,this.nav_list=[].concat(a),this.page_info.page_num=1,this.bottom_show=!1,3==t?(this.changeModal("show_modal",!0),this.getCategory()):a[t].desc_asc?this.getProduct(1,a[t].params+"|asc"):this.getProduct(1,a[t].params+"|desc")},changeModal:function(t,a){this[t]=a,a?_.afterOpen():_.beforeClose()},getProduct:function(t,a){var s=this,e=this.$route.query.pcid||"",o=this.$route.query.kw||"";l.a.get(r.a.product_list,{params:{pcid:e,page_size:this.page_info.page_size,order_type:a,page_num:t,kw:o,token:localStorage.getItem("token")}}).then(function(a){if(200==a.data.status){if(!(a.data.data.length>0))return!1;s.page_info.page_num=s.page_info.page_num+1,s.product_list=t>1?s.product_list.concat(a.data.data):a.data.data,s.isScroll=!0,s.total_count=a.data.total_count}else Object(u.Toast)({message:a.data.message,duration:1e3,className:"m-toast-fail"})},function(t){Object(u.Toast)({message:t.data.message,duration:1e3,className:"m-toast-fail"})})},getCategory:function(){var t=this;l.a.get(r.a.category_list,{params:{deep:2}}).then(function(a){200==a.data.status&&(t.category_list=a.data.data)})},categoryClick:function(t,a){}}},p={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"m-product",on:{touchmove:function(a){return a.stopPropagation(),t.touchMove(a)}}},[s("nav-list",{attrs:{navlist:t.nav_list},on:{navClick:t.navClick}}),t._v(" "),s("product",{attrs:{list:t.product_list}}),t._v(" "),t.bottom_show?s("bottom-line"):t._e(),t._v(" "),t.show_modal?s("div",{staticClass:"m-modal-select",on:{click:function(a){t.changeModal("show_modal",!1)}}},[s("div",{staticClass:"m-modal-state"},[s("div",{staticClass:"m-state-content"},[t._l(t.category_list,function(a,e){return[a.subs?s("div",{staticClass:"m-one-select"},[s("p",[t._v(t._s(a.pcname))]),t._v(" "),a.subs?s("div",{staticClass:"m-sku-list"},t._l(a.subs,function(a,o){return s("span",{staticClass:"m-one-sku",on:{click:function(a){a.stopPropagation(),t.categoryClick(e,o)}}},[t._v(t._s(a.pcname))])})):t._e()]):t._e()]})],2),t._v(" "),t._m(0)])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"m-state-foot"},[a("div",{staticClass:"m-product-detail-btn"},[a("span",[this._v("重置")]),this._v(" "),a("span",{staticClass:"active"},[this._v("确定")])])])}]};var h=s("VU/8")(m,p,!1,function(t){s("haC5")},"data-v-26351abf",null);a.default=h.exports}});
//# sourceMappingURL=49.2b9aa9a39a3526e231b2.js.map