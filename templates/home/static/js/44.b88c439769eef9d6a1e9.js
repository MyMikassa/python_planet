webpackJsonp([44],{MuqU:function(t,a){},wd8W:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("CaOM"),s=e("gTcU"),n=e("mtWM"),c=e.n(n),o=e("P9l9"),l=e("Au9i"),r=e("POuD"),u={data:function(){return{scene_list:"",nav_list:"",product_list:[],page_info:{page_num:1,page_size:10},isScroll:!0,total_count:0,bottom_show:!1}},components:{product:s.a,bottomLine:r.a},mounted:function(){i.a.changeTitle("场景推荐"),this.getScene()},methods:{getScene:function(){var t=this;c.a.get(o.a.scene_list).then(function(a){if(200==a.data.status){for(var e=0,i=0;i<a.data.data.length;i++)a.data.data[i].active=!1,a.data.data[i].psid==t.$route.query.psid&&(e=i);a.data.data[e].active=!0,t.scene_list=[].concat(a.data.data),t.getNav(a.data.data[e].psid)}})},getNav:function(t){var a=this;c.a.get(o.a.items_list,{params:{ittype:0,psid:t}}).then(function(t){if(200==t.data.status)if(0==t.data.data.length)a.nav_list=[],a.product_list=[],a.total_count=1,a.page_info.page_num=1;else{for(var e=0;e<t.data.data.length;e++)t.data.data[e].active=!1;t.data.data[0].active=!0,a.nav_list=[].concat(t.data.data),a.getProduct(a.nav_list[0].itid)}})},getProduct:function(t){var a=this,e=this.page_info.page_num;c.a.get(o.a.product_list,{params:{page_size:this.page_info.page_size,page_num:e,token:localStorage.getItem("token"),itid:t}}).then(function(t){if(200==t.data.status){if(!(t.data.data.length>0))return a.product_list=[],a.total_count=1,a.page_info.page_num=1,!1;a.product_list=e>1?a.product_list.concat(t.data.data):t.data.data,a.isScroll=!0,a.total_count=t.data.total_count,a.page_info.page_num=a.page_info.page_num+1}else Object(l.Toast)({message:t.data.message,duration:1e3,className:"m-toast-fail"})},function(t){Object(l.Toast)({message:t.data.message,duration:1e3,className:"m-toast-fail"})})},sceneClick:function(t){if(this.scene_list[t].active)return!1;for(var a=[].concat(this.scene_list),e=0;e<a.length;e++)a[e].active=!1;a[t].active=!0,this.scene_list=[].concat(a),this.getNav(a[t].psid)},navClick:function(t){if(this.nav_list[t].active)return!1;for(var a=[].concat(this.nav_list),e=0;e<a.length;e++)a[e].active=!1;a[t].active=!0,this.nav_list=[].concat(a),this.getProduct(a[t].itid)},returnTop:function(){document.querySelector("#header").scrollIntoView(!0)},touchMove:function(t){var a=i.a.getScrollTop(),e=i.a.getScrollHeight();if(a+i.a.getClientHeight()>=e-10&&this.isScroll)if(this.isScroll=!1,this.product_list.length==this.total_count)this.bottom_show=!0;else for(var s=0;s<this.nav_list.length;s++)this.nav_list[s].active&&this.getProduct(this.nav_list[s].itid)}},created:function(){}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-scene",attrs:{id:"header"},on:{touchmove:function(a){return a.stopPropagation(),t.touchMove(a)}}},[e("div",{staticClass:"m-scroll m-margin"},[e("ul",{staticClass:"m-selected-scene-ul"},t._l(t.scene_list,function(a,i){return e("li",{on:{click:function(a){t.sceneClick(i)}}},[e("img",{staticClass:"m-selected-scene-img",class:a.active?"active":"",attrs:{src:a.pspic,alt:""}})])}))]),t._v(" "),e("div",{staticClass:"m-scroll-l"},[e("ul",{staticClass:"m-scene-label"},t._l(t.nav_list,function(a,i){return e("li",{class:a.active?"active":"",on:{click:function(a){t.navClick(i)}}},[t._v(t._s(a.itname))])}))]),t._v(" "),e("product",{attrs:{list:t.product_list}}),t._v(" "),t.bottom_show?e("bottom-line"):t._e(),t._v(" "),e("span",{staticClass:"m-icon-top"})],1)},staticRenderFns:[]};var _=e("VU/8")(u,d,!1,function(t){e("MuqU")},"data-v-35de1135",null);a.default=_.exports}});
//# sourceMappingURL=44.b88c439769eef9d6a1e9.js.map