webpackJsonp([34],{"0WDt":function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=n("6u2u"),o=n("BpNX"),e=n("CaOM"),i=n("mtWM"),c=n.n(i),l=n("P9l9"),u=n("Au9i"),p=n("POuD"),r={data:function(){return{nav_list:[],signIn:!1,couponList:[],itid:"",page_num:1,page_size:10,isScroll:!0,total_count:0,bottom_show:!1}},inject:["reload"],components:{navList:s.a,couponCard:o.a,bottomLine:p.a},methods:{navClick:function(t){this.page_num=1,this.total_count=0,this.bottom_show=!1;for(var a=[].concat(this.nav_list),n=0;n<a.length;n++)a[n].active=!1;a[t].active=!0,this.itid=a[t].itid,this.getUserCoupon(),this.nav_list=[].concat(a)},userSignIn:function(){var t=this;c.a.post(l.a.user_sign_in+"?token="+localStorage.getItem("token")).then(function(a){200==a.data.status?(Object(u.Toast)(a.data.message),t.signIn=!0):Object(u.Toast)(a.data.message)})},getItems:function(){var t=this;c.a.get(l.a.items_list,{params:{ittype:20}}).then(function(a){if(200==a.data.status){t.nav_list=a.data.data;for(var n=0;n<t.nav_list.length;n++)t.nav_list[n].name=t.nav_list[n].itname,t.nav_list[n].active=!1,t.nav_list[0].active=!0;t.itid=t.nav_list[0].itid,t.getUserCoupon()}else Object(u.Toast)(a.data.message)})},getUserCoupon:function(){var t=this,a={token:localStorage.getItem("token"),itid:this.itid,page_num:this.page_num,page_size:this.page_size};c.a.get(l.a.coupon_list,{params:a}).then(function(a){if(200!=a.data.status)return Object(u.Toast)(a.data.message),t.couponList=[],t.page_num=1,t.total_count=0,!1;t.isScroll=!0,a.data.data.length>0&&(t.page_num>1?t.couponList=t.couponList.concat(a.data.data):t.couponList=a.data.data,t.page_num=t.page_num+1,t.total_count=a.data.total_count)})},touchMove:function(t){var a=e.a.getScrollTop(),n=e.a.getScrollHeight();a+e.a.getClientHeight()>=n-10&&this.isScroll&&(this.isScroll=!1,this.couponList.length==this.total_count?this.bottom_show=!0:this.getUserCoupon())},loadTop:function(){this.reload()}},mounted:function(){e.a.changeTitle("优惠中心"),this.getItems()}},v={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"m-couponCenter",on:{touchmove:function(a){return a.stopPropagation(),t.touchMove(a)}}},[n("mt-loadmore",{attrs:{"top-method":t.loadTop}},[n("div",{staticClass:"m-couponCenter-top"},[n("span",{staticClass:"m-couponCenter-rule"},[t._v("积分规则")]),t._v(" "),n("p",{staticClass:"m-couponCenter-top-p"},[t._v("累计积分：520")]),t._v(" "),n("div",{staticClass:"m-couponCenter-day"},[n("span",[t._v("已连续签到")]),t._v(" "),n("span",{staticClass:"m-couponCenter-day-bg"},[n("span",{staticClass:"m-line"}),t._v(" "),n("span",{staticClass:"m-num"},[t._v("0")])]),t._v(" "),n("span",{staticClass:"m-couponCenter-day-bg"},[n("span",{staticClass:"m-line"}),t._v(" "),n("span",{staticClass:"m-num"},[t._v("0")])]),t._v(" "),n("span",{staticClass:"m-couponCenter-day-bg"},[n("span",{staticClass:"m-line"}),t._v(" "),n("span",{staticClass:"m-num"},[t._v("3")])]),t._v(" "),n("span",[t._v("天")])]),t._v(" "),n("div",{staticClass:"m-couponCenter-week"},[t.signIn?t._e():n("span",{staticClass:"m-couponCenter-week-btn",on:{click:t.userSignIn}},[t._v("签到")]),t._v(" "),t.signIn?n("span",{staticClass:"m-couponCenter-week-btn active"},[t._v("已签到")]):t._e()])]),t._v(" "),n("div",{staticClass:"m-couponCenter-content"},[n("div",{staticClass:"m-nav"},[n("nav-list",{attrs:{navlist:t.nav_list,isScroll:!0},on:{navClick:t.navClick}})],1),t._v(" "),n("div",{staticClass:"m-couponCenter-content-ul"},[n("coupon-card",{attrs:{couponList:t.couponList}})],1)]),t._v(" "),t.bottom_show?n("bottom-line"):t._e()],1)],1)},staticRenderFns:[]};var _=n("VU/8")(r,v,!1,function(t){n("Iy1N")},"data-v-5fca5946",null);a.default=_.exports},Iy1N:function(t,a){}});
//# sourceMappingURL=34.0cdedaed16a1ccc4e323.js.map