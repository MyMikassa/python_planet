webpackJsonp([4],{"8eYY":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("QLTB"),i=s("mtWM"),n=s.n(i),o=s("P9l9"),r=s("Au9i"),c={data:function(){return{product_info:null,slots:[{flex:1,values:[],className:"slot1",textAlign:"center"}],status_slot:[{flex:1,values:[{name:"已收到货",value:0},{name:"未收到货",value:1}],className:"slot1",textAlign:"center"}],show_picker:!1,status_select:null,picker_select:"",oraproductstatus:0,total_money:0,img_box:[],upload_img:[],refund_slot:[{flex:1,values:[],className:"slot1",textAlign:"center"}],refund_select:null,order:null,oraaddtion:""}},components:{picker:a.a},mounted:function(){this.$route.query.allOrder?(this.order=JSON.parse(this.$route.query.product),this.total_money=JSON.parse(this.$route.query.product).omtruemount,this.product_info=JSON.parse(this.$route.query.product).order_part):(this.product_info=JSON.parse(this.$route.query.product),this.total_money=JSON.parse(this.$route.query.product)[0].opsubtotal),this.oraproductstatus=Number(this.$route.query.oraproductstatus),this.getBack()},methods:{changeRoute:function(t){this.$router.push(t)},showPicker:function(t,e){this.show_picker=!0,this.slots=this[t],this.picker_select=e},pickerSave:function(t,e,s){s&&(this[this.picker_select]=s[0]),this[t]=e},uploadImg:function(t){var e=this;if(this.img_box&&4==this.img_box.length)return Object(r.Toast)("最多只可上传4长图片"),!1;var s=t.target.files||t.dataTransfer.files;if(s.length){var a=new FileReader,i=this,c=new FormData;c.append("file",s[0]),n.a.post(o.a.upload_file+"?token="+localStorage.getItem("token"),c).then(function(t){200==t.data.status&&(e.upload_img.push(t.data.data),a.readAsDataURL(s[0]),a.onload=function(t){i.img_box.push(this.result)})})}},getBack:function(){var t=this;n.a.get(o.a.list_dispute_type,{params:{type:this.oraproductstatus}}).then(function(e){if(200==e.data.status)for(var s=0;s<e.data.data.length;s++)t.refund_slot[0].values.push(e.data.data[s].diname)})},submitRefund:function(){var t=this;return this.refund_select?1!=this.oraproductstatus||this.status_select?void n.a.post(o.a.refund_create+"?token="+localStorage.getItem("token"),{omid:this.order&&this.order.omid||"",opid:!this.order&&this.product_info[0].opid||"",orareason:this.refund_select,oraproductstatus:this.status_select&&this.status_select.value||0,oraaddtion:this.oraaddtion,oraddtionvoucher:this.upload_img,orastate:this.oraproductstatus,oramount:this.total_money}).then(function(e){200==e.data.status?t.$router.push("/backDetail"):Object(r.Toast)(e.data.message)}):(Object(r.Toast)("请先选择货物状态"),!1):(Object(r.Toast)("请先选择退货原因"),!1)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.product_info?s("div",{staticClass:"m-selectBack"},[s("div",{staticClass:"m-product-info"},[t._l(t.product_info,function(e,a){return[s("div",{staticClass:"m-one-product"},[s("img",{attrs:{src:e.prmainpic,alt:""}}),t._v(" "),s("div",[s("p",[t._v(t._s(e.prtitle))]),t._v(" "),s("p",{staticClass:"m-ft-22"},[t._v("规格：\n            "),t._l(e.skuattritedetail,function(a,i){return[s("span",[t._v(t._s(a))]),t._v(" "),i<e.skuattritedetail.length-1?s("span",[t._v("；")]):t._e()]})],2)])])]})],2),t._v(" "),s("div",{staticClass:"m-selectBack-content"},[s("div",{staticClass:"m-one-select"},[s("ul",{staticClass:"m-selectBack-ul"},[t.oraproductstatus?s("li",{on:{click:function(e){t.showPicker("status_slot","status_select")}}},[t._m(0),t._v(" "),s("span",[t.status_select?s("span",{staticClass:"m-grey"},[t._v(t._s(t.status_select.name))]):s("span",{staticClass:"m-grey"},[t._v("请选择")]),t._v(" "),s("span",{staticClass:"m-icon-more"})])]):t._e(),t._v(" "),s("li",{on:{click:function(e){t.showPicker("refund_slot","refund_select")}}},[t._m(1),t._v(" "),s("span",[t.refund_select?s("span",{staticClass:"m-grey"},[t._v(t._s(t.refund_select))]):s("span",{staticClass:"m-grey"},[t._v("请选择")]),t._v(" "),s("span",{staticClass:"m-icon-more"})])])]),t._v(" "),s("p",{staticClass:"m-selectBack-num"},[t._v("退款金额："),s("span",{staticClass:"m-price"},[t._v("￥"+t._s(t._f("money")(t.total_money)))])])]),t._v(" "),s("div",{staticClass:"m-one-select"},[s("div",[s("span",[t._v("退款原因：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.oraaddtion,expression:"oraaddtion"}],attrs:{name:"",id:"",placeholder:"选填"},domProps:{value:t.oraaddtion},on:{input:function(e){e.target.composing||(t.oraaddtion=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"m-selectBack-img-box"},[s("div",{staticClass:"m-selectBack-camera",on:{click:t.uploadImg}},[s("input",{staticClass:"m-upload-input",attrs:{type:"file",name:"file",value:"",accept:"image/jpeg,image/png,image/jpg,image/gif",multiple:""},on:{change:t.uploadImg}})]),t._v(" "),t._l(t.img_box,function(t,e){return[s("img",{attrs:{src:t,alt:""}})]})],2)]),t._v(" "),s("div",{staticClass:"m-foot-btn"},[s("span",{on:{click:t.submitRefund}},[t._v("提交")])])]),t._v(" "),s("picker",{attrs:{show_picker:t.show_picker,slots:t.slots},on:{pickerSave:t.pickerSave}})],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-flex-between"},[e("span",{staticClass:"m-border"}),this._v(" "),e("span",[this._v("货物状态")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-flex-between"},[e("span",{staticClass:"m-border"}),this._v(" "),e("span",[this._v("退款原因")])])}]};var l=s("VU/8")(c,u,!1,function(t){s("y6tS")},"data-v-4bde629e",null);e.default=l.exports},E10X:function(t,e){},QLTB:function(t,e,s){"use strict";var a={data:function(){return{select:"",input_value:""}},props:{slots:{type:Array,default:null},show_picker:{type:Boolean,default:!1},params:{type:String,default:""},is_search:{type:Boolean,default:!1}},methods:{onValuesChange:function(t,e){console.log(e),this.select=e},pickerSave:function(t){this.input_value="",this.$emit("pickerSave","show_picker",t,this.select,this.params)},cancelSave:function(t){this.input_value="",this.$emit("pickerSave","show_picker",t)},inputChange:function(){this.$emit("inputChange",this.input_value)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.show_picker,callback:function(e){t.show_picker=e},expression:"show_picker"}},[s("p",{staticClass:"m-picker-text"},[s("span",{staticClass:"cancel",on:{click:function(e){t.cancelSave(!1)}}},[t._v("取消")]),t._v(" "),s("span",{staticClass:"m-picker-btn",on:{click:function(e){t.pickerSave(!1)}}},[t._v("确定")])]),t._v(" "),t.is_search?s("input",{directives:[{name:"model",rawName:"v-model",value:t.input_value,expression:"input_value"}],staticClass:"m-picker-input",attrs:{type:"text"},domProps:{value:t.input_value},on:{input:[function(e){e.target.composing||(t.input_value=e.target.value)},t.inputChange]}}):t._e(),t._v(" "),s("mt-picker",{attrs:{slots:t.slots,"value-key":"name"},on:{change:t.onValuesChange}})],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(t){s("E10X")},"data-v-1c72f9fc",null);e.a=n.exports},y6tS:function(t,e){}});
//# sourceMappingURL=4.ffd2501b586e708415f4.js.map